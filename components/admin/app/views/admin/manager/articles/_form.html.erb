<% form_url = article.persisted? ? manager_article_path(@article) : manager_articles_path %>
<%= form_with(model: article, url: form_url) do |form| %>
  <% if article.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(article.errors.count, "error") %> prohibited this manager_article from being saved:</h2>

      <ul>
        <% article.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class='w-full mt-5'>
    <%= form.label '标题:' %>
    <%= form.text_field :title, class: 'form-input rounded' %>
  </div>

  <div class='w-full mt-5'>
    <%= form.label 'tags:' %>
    <%# article_tags = (article.article_tags.present? ?  %>
    <%# article_tags = article.article_tag.tags %>
    <%= form.select :articles_article_tags, 
                    options_from_collection_for_select(Backend::ArticleTag.all, :id, :name, article.article_tags.ids),
                    { include_blank: true }, 
                    { :multiple => true, class: 'choice form-input rounded'} %>
    <%# form.select :articles_article_tags, 
                    Backend::ArticleTag.all.collect { |t| [t.name, t.id] }, 
                    { include_blank: true }, 
                    { :multiple => true, class: 'choice form-input rounded'} %>
  </div>
  
  <div class="field mt-5">
    <%# form.label '正文:' %>
    <%= form.rich_text_area :content %>
  </div>

  <div class='w-full mt-5'>
    <%= form.label '作者:' %>
    <%= form.text_field :author, class: 'form-input rounded' %>
  </div>

  <div class='w-full mt-5'>
    <%= form.label '来源:' %>
    <%= form.text_field :source_url, class: 'form-input rounded' %>
  </div>

  <div class='mt-5'>
    <%= form.submit class: 'btn btn-sm btn-success' %>
  </div>
<% end %>
